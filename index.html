<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/e105bb1e93.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }

        .back {
            background-color: #ffffff;
        }

        .left {
            background-color: black;
            width: 20vw;
            height: 100vh;
            position: fixed;
            left: 0px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
            z-index: 2;
        }

        .right {

            width: 100vw;
            height: 100vh;
            position: relative;
            right: 0px;
            top: 0px;
            z-index: 1;
        }

        .left-space {
            position: absolute;
            width: 20vw;
            height: 100vh;
            left: 0px;
        }

        /* .inside {
            position: absolute;
            left: 20vw;
        } */

        .old {
            width: 50%;
            height: 20%;
            position: absolute;
            left: 0;
            right: 0;
            margin: auto;
            top: 10%;
            z-index: 3;
        }

        .sus {
            position: absolute;
            top: 35vh;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            /* 拉伸子项目 */
            justify-content: space-between;
            /* 均分子项目 */
            height: 40vh;
        }

        .btn1 {
            position: relative;
            z-index: 100;
            width: 15vw;
            background-color: #000000;
            overflow: hidden;
            box-shadow: 0px 0px 17px 1px rgba(0, 0, 0, 0.34);
            padding: 2vh 1vw;
            text-decoration: none;
            text-align: left;
        }

        .btn1 span {
            color: white;
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            padding-left: 35px;
            display: block;
            transform: scaleX(0.6);
            transform-origin: center left;
            transition: color 0.3s ease;
            position: relative;
            z-index: 1;
        }



        .btn1 em {
            position: absolute;
            height: 1px;
            width: 30%;
            right: 23px;
            top: 50%;
            background: #ffffff;
            transform: scaleX(0.25);
            transform-origin: center right;
            transition: all 0.3s ease;
            z-index: 1;
        }

        .btn1:before,
        .btn1:after {
            content: '';
            position: absolute;
            height: 50%;
            width: 0;
            background: #ffffff;
            transition: 0.3s cubic-bezier(0.785, 0.135, 0.15, 0.86);
        }

        .btn1:before {
            top: 0;
            left: 0;
            right: auto;
        }

        .btn1:after {
            bottom: 0;
            right: 0;
            left: auto;
        }

        .btn1:hover:before {
            width: 100%;
            right: 0;
            left: auto;
        }

        .btn1:hover:after {
            width: 100%;
            left: 0;
            right: auto;
        }

        .btn1:hover span {
            /* 当鼠标悬停在按钮上时，改变字体颜色为黑色 */
            color: #000000;
            /* 设置字体颜色为黑色，并使用 !important 关键字 */
        }

        .btn1:hover em {
            /* 当鼠标悬停在按钮上时，改变下划线颜色为黑色 */
            background: #000;
            /* 设置下划线颜色为黑色，并使用 !important 关键字 */
            transform: scaleX(1);
            /* 将下划线放大到正常大小，并使用 !important 关键字 */
        }

        .backimg {
            width: 50%;
            height: 20%;
            left: 0;
            right: 0;
            top: 10%;
            margin: auto;
            border-radius: 50%;

            background-color: white;
            position: absolute;
            z-index: 2;
        }

        .popup-button {
            position: fixed;
            bottom: 0;
            right: 0;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border-color: black;
            border-width: 2px;
            cursor: pointer;
            z-index: 1000;
            background-color: transparent;
            background-image: url("https://mir-s3-cdn-cf.behance.net/project_modules/disp/d58eb146152113.584973d61bdcf.gif");
            background-size: cover;
            background-position: center;
        }

        .popup-content {
            display: none;
            position: fixed;
            background-color: transparent;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .popup-content button {

            background-color: transparent;

            padding: 8px 15px;
            border-radius: 3px;
            cursor: pointer;
        }

        .icon {
            text-decoration: none;
            border-bottom: none;
            position: relative;
        }

        .icon:before {
            -moz-osx-font-smoothing: grayscale;
            -webkit-font-smoothing: antialiased;
            font-family: FontAwesome;
            font-style: normal;
            font-weight: normal;
            text-transform: none !important;
        }

        .ulicon {
            position: absolute;
            bottom: 0;
        }

        .icon>.label {
            display: none;
        }

        ul.icons {
            cursor: default;
            list-style: none;
            padding-left: 0;
        }

        ul.icons li {
            display: inline-block;
            text-align: center;
            padding-left: 0;
            padding-right: 1em;
        }

        ul.icons li a {
            display: block;
            border-radius: 100%;
            margin: 0;
            padding: 0.5em;
            border: solid 1px rgba(204, 204, 204, 0.582);
            color: rgba(204, 204, 204, 0.582);
        }

        ul.icons li a:before {
            font-size: 1.5em;
            display: block;
            width: 1.5em;
            height: 1.5em;
            line-height: 1.5em;
        }

        ul.icons li a:hover {
            background-color: #000000;
            border: solid 1px rgb(255, 255, 255);
            color: #FFF;
        }

        ul.icons li:last-child {
            padding-right: 0;
        }
        ul.icons button{
            border-radius:50px ;
        }
        .color-display {
            width: 100%;
            height: 200px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            position: relative;
        }

        .slider-container {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .slider-container label {
            width: 30px;
        }

        .slider-container input {
            flex: 1;
            margin: 0 10px;
        }

        .color-code {
            margin-top: 20px;
            font-size: 18px;
            text-align: center;
        }

        .text-display {
            font-size: 24px;
            text-align: center;
            margin-top: 20px;
            position: absolute;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
        }

        .modal-dialog {
            max-width: 70%;
        }

        #calculator-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
        }

        #calculator {
            max-width: 360px;
            background-color: #0d1b2a;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
            margin-right: 20px;
        }

        #display {
            width: 100%;
            height: 56px;
            font-size: 20px;
            text-align: right;
            margin-bottom: 10px;
            padding: 20px;
            border-radius: 5px;
            color: #e0e1dd;
            background-color: rgba(144, 144, 144, 0.3);
            border: none;
            box-sizing: border-box;
        }

        #ans {
            width: 100%;
            height: 30px;
            font-size: 15px;
            text-align: right;
            margin-bottom: 10px;
            padding: 20px;
            border-radius: 5px;
            color: #e0e1dd;
            background-color: rgba(144, 144, 144, 0.3);
            border: none;
            box-sizing: border-box;
        }

        .operator {
            color: #219ebc;
        }

        #ac {
            color: #bf4d5d;
        }

        .equal {
            width: calc(50% - 10px);
        }

        #de {
            width: calc(50% - 10px);
        }

        .lol {
            width: calc(25% - 10px);
            height: 50px;
            font-size: 20px;
            margin: 10px 5px;
            border: none;
            border-radius: 5px;
            float: left;
            background-color: rgb(13, 17, 42);
            color: #e0e1dd;
            -webkit-box-shadow: -1px 1px 30px -5px rgba(0, 0, 0, 0.2);
            -moz-box-shadow: -1px 1px 30px -5px rgba(0, 0, 0, 0.2);
            box-shadow: -1px 1px 30px -5px rgba(0, 0, 0, 0.2);
        }

        .lol:hover {
            cursor: pointer;
        }

        .lol:active {
            transform: scale(1.05);
            box-shadow: 0 2px 4px 1px rgba(0, 0, 0, 0.19), 0 1.5px 1.5px rgba(0, 0, 0, 0.23);
        }

        #history {
            max-width: 360px;
            background-color: #0d1b2a;
            border-radius: 10px;
            padding: 30px;
            /* box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23); */
            color: #e0e1dd;
            overflow-y: auto;
            max-height: 400px;
        }

        .history-item {
            margin-bottom: 10px;
            cursor: pointer;
        }

        .history-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        #container {
            width: 80vw;
            height: 100vh;
            
            position: relative;
            overflow: hidden;
        }

        .box {
            width: 150px;
            /* 方塊的寬度 */
            height: 150px;
            /* 方塊的高度 */
            background-image: url('https://github.com/DCYOYO/yoyo/blob/c6ccc9b43e7177e1dc382998cd287a6061efaa9e/Pop_Cat_Animated.webp');
            background-size: cover;
            background-position: center;
            position: absolute;
        }
        .popcat{
            position: fixed;
            display: flex;
            justify-content: space-between;
            top: 0px;
            left: 80%;
            width: 20%;
            padding: 10px;
        }
        .circle-btn {
            border-radius: 50% !important;
            width: 50px !important;
            height: 50px !important;
            text-align: center !important;
            padding: 0 !important;
            font-size: 24px !important;
            line-height: 50px !important; /* 使文字垂直居中 */
            box-shadow: none !important;
            color: transparent !important;
            background-color: #000 !important;
        }
        
    </style>
</head>

<body style="margin: 0;">
    <main>
        <div class="left">
            <div>
                <img src="" class="old">
                <div class="backimg"></div>
            </div>

            <div class="sus">
                <a href="#page1" class="btn1" data-transition="slide">
                    <span>Button 1</span>
                    <em></em>
                </a>
                <a href="#page2" class="btn1" data-transition="slide">
                    <span>Button 2</span>
                    <em></em>
                </a>
                <a href="#page3" class="btn1" data-transition="slide">
                    <span>popcat</span>
                    <em></em>
                </a>
                <!-- <a href="#page2" class="btn1" data-transition="slide">
                    <span>Button 2</span>
                    <em></em>
                </a> -->
            </div>



            <div class="ulicon">
                <ul class="icons">
                    <li><a href="#" class="icon fa-sharp fa-solid fa-x"><span class="label">Twitter</span></a></li>
                    <li><a href="#" class="icon fa fa-facebook"><span class="label">Facebook</span></a></li>
                    <li><a href="#" class="icon fa-brands fa-discord"><span class="label">Instagram</span></a></li>
                    <li><a href="#" class="icon fa-brands fa-github"><span class="label">Email</span></a></li>
                </ul>
            </div>

        </div>
        <div style="position: fixed; left: 20vw;width: 80vw;height: 100vh;">
            <div data-role="page" id="page1" class="back">

                <div class="text-display" id="mainTextDisplay">This text color will change based on the background color
                </div>

            </div>
            <div data-role="page" id="page2" class="back">

                bruh

            </div>
            <div data-role="page" id="page3" class="back">
                
                    <div id="container"></div>
                        <div class="popcat">
                            <button id="startAddingBtn" class="fa-solid fa-play circle-btn"></button>
                            <button id="stopAddingBtn" class="fa-solid fa-stop circle-btn"></button>
                            <button id="clearBoxesBtn" class="fa-solid fa-rotate-right circle-btn" ></button>
                        </div>
            </div>
        </div>
        <div class="modal fade" id="weatherModal" tabindex="-1" aria-labelledby="weatherModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="weatherModalLabel">選擇或輸入城市名稱</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="citySelect" class="form-label">選擇城市：</label>
                            <select class="form-select" id="citySelect">
                                <option value="Taipei">台北</option>
                                <option value="New York">紐約</option>
                                <option value="Tokyo">東京</option>
                                <option value="other">其他（請自行輸入）</option>
                            </select>
                        </div>
                        <div class="mb-3" id="otherCityInput" style="display: none;">
                            <label for="otherCity" class="form-label">城市名稱：</label>
                            <input type="text" class="form-control" id="otherCity" placeholder="請輸入城市名稱(ENGLISH)">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary getWeatherBtn">查詢天氣</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 顯示天氣結果的 Modal -->
        <div class="modal fade" id="weatherResultModal" tabindex="-1" aria-labelledby="weatherResultModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="weatherResultModalLabel">天氣查詢結果</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="weatherResultBody">
                        <!-- 天氣資訊將顯示在這裡 -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="colorAdjusterModal" tabindex="-1" role="dialog"
            aria-labelledby="colorAdjusterModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="colorAdjusterModalLabel">RGB Color Adjuster</h5>
                    </div>
                    <div class="modal-body">
                        <div class="color-display" id="colorDisplay">
                            <div class="text-display" id="modalTextDisplay">Preview text color based on background</div>
                        </div>
                        <div class="slider-container">
                            <label for="redSlider">R</label>
                            <input type="range" id="redSlider" min="0" max="255" value="255" class="form-control">
                        </div>
                        <div class="slider-container">
                            <label for="greenSlider">G</label>
                            <input type="range" id="greenSlider" min="0" max="255" value="255" class="form-control">
                        </div>
                        <div class="slider-container">
                            <label for="blueSlider">B</label>
                            <input type="range" id="blueSlider" min="0" max="255" value="255" class="form-control">
                        </div>
                        <div class="color-code" id="colorCode">RGB(255, 255, 255)</div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-success setBackgroundBtn" data-dismiss="modal">Set as
                            Background</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="calculatorModal" tabindex="-1" aria-labelledby="calculatorModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content" style="background-color: #0d1b2a; color: #e0e1dd;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="calculatorModalLabel">Calculator</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="calculator-container">
                            <div id="history">
                                <h3>History</h3>
                                <div id="history-content"></div>
                            </div>
                            <div id="calculator">
                                <input type="text" id="display" disabled>
                                <input type="text" id="ans" disabled>
                                <br>
                                <button id="ac" class="operator lol">AC</button>
                                <button id="de" class="operator lol">←</button>
                                <button id="/" class="operator lol">/</button>
                                <br>
                                <button id="7" class="lol">7</button>
                                <button id="8" class="lol">8</button>
                                <button id="9" class="lol">9</button>
                                <button id="*" class="operator lol">*</button>
                                <br>
                                <button id="4" class="lol">4</button>
                                <button id="5" class="lol">5</button>
                                <button id="6" class="lol">6</button>
                                <button id="-" class="operator lol">-</button>
                                <br>
                                <button id="1" class="lol">1</button>
                                <button id="2" class="lol">2</button>
                                <button id="3" class="lol">3</button>
                                <button id="+" class="operator lol">+</button>
                                <br>
                                <button id="00" class="lol">00</button>
                                <button id="0" class="lol">0</button>
                                <button id="." class="operator lol">.</button>
                                <button id="=" class="operator lol">=</button>
                                <br>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <button class="popup-button"></button>

        <div id="popup-content" class="popup-content">
            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#weatherModal">
                <b>查詢天氣</b>
            </button>
            <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#colorAdjusterModal">
                <b>背景選擇器</b>
            </button>
            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#calculatorModal">
                <b>計算機</b>
            </button>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

    </main>
    <script>
        let mouseX = 0;
        let mouseY = 0;
        let offsetX = 0;
        let offsetY = 0;
        let isDown = false;
        let yes = true;

        function move(e) {
            if (isDown) {
                const dx = e.pageX - mouseX;
                const dy = e.pageY - mouseY;
                let newX = offsetX + dx;
                let newY = offsetY + dy;
                yes = false;
                const button = $('.popup-button');
                const maxX = $(window).width() - button.outerWidth();
                const maxY = $(window).height() - button.outerHeight();
                newX = Math.max(0, Math.min(maxX, newX));
                newY = Math.max(0, Math.min(maxY, newY));

                button.css({ left: newX + 'px', top: newY + 'px' });
                updatePopupPosition(newX, newY);
            }
        }

        function updatePopupPosition(buttonOffsetX, buttonOffsetY) {
            const button = $('.popup-button');
            const popup = $('#popup-content');
            let popupX = buttonOffsetX;
            let popupY = buttonOffsetY - popup.outerHeight();

            // Check for overlap with button
            if (popupY < 0 || (popupY + popup.outerHeight() > $(window).height())) {
                popupY = buttonOffsetY + button.outerHeight(); // Place below the button
            }

            popupX = Math.min(popupX, $(window).width() - popup.outerWidth());
            popupY = Math.max(0, popupY);

            popup.css({
                left: popupX + 'px',
                top: popupY + 'px'
            });
        }
        function updateColor() {
            const red = $('#redSlider').val();
            const green = $('#greenSlider').val();
            const blue = $('#blueSlider').val();

            const rgbColor = `rgb(${red}, ${green}, ${blue})`;
            $('#colorDisplay').css('background-color', rgbColor);
            $('#colorCode').text(`RGB(${red}, ${green}, ${blue})`);
            

            
            const invertedRed = 255 - red;
            const invertedGreen = 255 - green;
            const invertedBlue = 255 - blue;
            const invertedColor = `rgb(${invertedRed}, ${invertedGreen}, ${invertedBlue})`;
            $('#modalTextDisplay').css('color', invertedColor);
        }
        $(document).ready(function () {
            const button = $('.popup-button');
            offsetX = button.offset().left;
            offsetY = button.offset().top;
            updatePopupPosition(offsetX, offsetY);

            button.mousedown(function (e) {
                isDown = true;

                mouseX = e.pageX;
                mouseY = e.pageY;
                offsetX = button.offset().left;
                offsetY = button.offset().top;
                $(document).mousemove(move);

            });

            $(document).mouseup(function () {
                isDown = false;


            });

            button.on('click', function () {

                if (yes == false) {
                    yes = true;
                }
                else if (yes == 1) {
                    $('#popup-content').toggle();
                    if ($('#popup-content').is(':visible')) {
                        updatePopupPosition(button.offset().left, button.offset().top);
                    }
                }
            });

            $('#close-button').on('click', function () {
                $('#popup-content').toggle();
            });
            var weatherUrl = 'https://api.openweathermap.org/data/2.5/weather?q=';

            // 當選擇「其他」時顯示輸入框
            $('#citySelect').on('change', function () {
                if ($(this).val() === 'other') {
                    $('#otherCityInput').show();
                } else {
                    $('#otherCityInput').hide();
                }
            });

            // 點擊按鈕時獲取天氣資訊
            $('.getWeatherBtn').on('click', function () {
                var selectedCity = $('#citySelect').val();
                if (selectedCity === 'other') {
                    selectedCity = $('#otherCity').val();
                    if (!selectedCity) {
                        alert('請輸入城市名稱');
                        return;
                    }
                }

                var fullWeatherUrl = `${weatherUrl}${selectedCity}&appid=0a071e7171b934d4601528841e88d90f&units=metric&lang=zh_tw`;

                // 使用 $.ajax 獲取天氣資訊
                $.ajax({
                    url: fullWeatherUrl,
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {
                        var weatherInfo = `<div class="card">
                                               <div class="card-body">
                                                   <h5 class="card-title">城市: ${data.name}</h5>
                                                   <p class="card-text">溫度: ${data.main.temp}°C</p>
                                                   <p class="card-text">天氣: ${data.weather[0].description}</p>
                                                   <p class="card-text">濕度: ${data.main.humidity}%</p>
                                                   <p class="card-text">風速: ${data.wind.speed} m/s</p>
                                               </div>
                                           </div>`;
                        $('#weatherResultBody').html(weatherInfo);
                        // 關閉輸入城市名稱的模態框
                        $('#weatherModal').modal('hide');
                        // 顯示結果的模態框
                        $('#weatherResultModal').modal('show');
                    },
                    error: function (error) {
                        console.error('錯誤:', error);
                        $('#weatherResultBody').html('錯誤: ' + error.responseText);
                        // 顯示結果的模態框
                        $('#weatherResultModal').modal('show');
                    }
                });
            });
            $('.setBackgroundBtn').on('click', function () {
                const red = $('#redSlider').val();
                const green = $('#greenSlider').val();
                const blue = $('#blueSlider').val();

                const rgbColor = `rgb(${red}, ${green}, ${blue})`;
                $('.back').css('background-color', rgbColor);



                const invertedRed = 255 - red;
                const invertedGreen = 255 - green;
                const invertedBlue = 255 - blue;
                const invertedColor = `rgb(${invertedRed}, ${invertedGreen}, ${invertedBlue})`;
                $('#mainTextDisplay').css('color', invertedColor);
                $('.popup-content button').css('color', invertedColor);




            });

            $('#redSlider, #greenSlider, #blueSlider').on('input', updateColor);
            const display = $("#display");
            const ans = $("#ans");
            const btns = $("button");
            const historyContent = $("#history-content");
            var fir = true;

            display.val("0");
            ans.val("ANS=");

            btns.on('click', function () {
                
                
                var dis = display.val().slice(-1);
                var va = $(this).attr("id");
                if(display.val()=="undefined"){
                    display.val("");
                }
                else if ($(this).attr("id") === "=") {
                    
                    try {                  
                            let result = eval(display.val());
                            ans.val("ANS=" + result);
                            addToHistory(display.val() + " = " + result, result);
                            fir = true;
                    } catch (e) {
                        ans.val("Error");
                    }
                } else if ($(this).attr("id") == "de") {
                    display.val(display.val().slice(0, -1));
                } else if ($(this).attr("id") === "ac") {
                    display.val("0");
                    ans.val("ANS=");
                    fir = true;
                } else {
                    if (fir) {
                        ans.val("ANS=");
                        if ($(this).attr("id") == "00" || $(this).attr("id") == "0") {
                            display.val("0");
                        } else if (va == "+" || va == "." || va == "/" || va == "*" || va == "-") {
                            ans.val("Error");
                            display.val("0");
                        } else {
                            display.val($(this).attr("id"));
                            fir = false;
                        }
                    } else {
                        if (dis != "+" && dis != "." && dis != "/" && dis != "*" && dis != "-") {
                            display.val(display.val() + $(this).attr("id"));
                        } else if (va != "+" && va != "." && va != "/" && va != "*" && va != "-") {
                            display.val(display.val() + $(this).attr("id"));
                        } else {
                            display.val(display.val().slice(0, -1) + va);
                        }
                    }
                }
                
                

            });
            

            function addToHistory(expression, result) {
                let historyItem = $("<div></div>");
                historyItem.addClass("history-item");
                historyItem.text(expression);
                historyItem.attr("id", result);
                historyItem.on('click', function () {
                    if (fir) {
                        if(result!="undefined"){
                            display.val($(this).attr('id'));
                            fir = false;
                        } 
                    } else {
                        if(result!="undefined"){
                            display.val(display.val() + $(this).attr('id'));
                        }  
                    }
                });
                historyContent.append(historyItem);
            }
            var intervalId;
            var rotateInterval;
            var angle = 0;
            $('#startAddingBtn').on('click', function() {
                // 設置一個定時器，每隔500毫秒添加一個新方塊
                
                intervalId = setInterval(function() {
                    // 創建新方塊
                    var newBox = $('<div class="box"></div>');
                    
                    // 獲取容器的寬度和高度
                    var containerWidth = $('#container').width();
                    var containerHeight = $('#container').height();

                    // 隨機生成 X 和 Y 座標
                    var randomX = Math.floor(Math.random() * (containerWidth - 100)); // 100 是方塊的寬度
                    var randomY = Math.floor(Math.random() * (containerHeight - 100)); // 100 是方塊的高度

                    // 設置方塊的位置
                    newBox.css({
                        left: randomX + 'px',
                        top: randomY + 'px'
                    });

                    // 將新方塊添加到容器中
                    $('#container').append(newBox);
                }, (Math.random()*300)+30); // 每500毫秒添加一次
            });
            
            $('#stopAddingBtn').on('click', function() {
                // 清除定時器
                clearInterval(intervalId);
            });

            $('#clearBoxesBtn').on('click', function() {
                // 移除所有方塊
                $('#container').empty();
                // 停止自動添加
                clearInterval(intervalId);
            });
            var angle = 0;
        var rotateInterval;

        function rotateObject(sus) {
            angle += 1;
           sus.css('transform', 'rotate(' + angle + 'deg) !important');
        }

        function startRotation(sus) {
            rotateInterval = setInterval(rotateObject(sus), 10); // 每10毫秒旋转1度
        }

        function pauseRotation() {
            clearInterval(rotateInterval);
        }

        
        });






    </script>
</body>

</html>
